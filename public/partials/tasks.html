<div class="row-fluid">
    <div class="span10">
        <h1>Tasks</h1>
        <h4><a href="http://github.com/{{owner}}/{{repoName}}">http://github.com/{{owner}}/{{repoName}}</a></h4>
    </div>
    <div class="span2"><a class="btn pull-right" href="#"><i class="icon-chevron-left"></i> Back to Projects</a></div>
</div>

<hr/>





<div class="row-fluid">
    <div class="span6">
        <h5>Milestone</h5>
        <select ng-model="milestone" ng-options="m.title for m in milestones | orderBy : 'due_on'">
            <option value="">-- chose milestone --</option>
        </select>
    </div>
    <div class="span4"><span ng-show="milestone">{{milestone.open_issues}} open | {{milestone.closed_issues}} closed <br/> {{milestone.due_on | date:short}}</span></div>
    <div class="span2"><a class="btn pull-right" href="#/repo/{{owner}}/{{repoName}}"><i class="icon-calendar"></i> Planner</a></div>
</div>

<hr/>



<div class="">

<!--
<table class="task-table">
        <thead>
            <th ng-repeat="s in states">{{s}}</th>
        </thead>
</table>

<table class="task-table">
    <tbody>
        <tr>
            <td droppable="drop(draggable,'open');" class="well" ng-repeat="s in states">
                <div class="task" draggable ng-model="i" ng-repeat="i in issues | orderBy: 'number' | filter: { task_details.length : 0, state: s }">
                    <div class="row-fluid">
                        <div class="span10">
                            <h4 ng-show="true" class="">
                                <a href="{{i.html_url}}">#{{i.number}}</a>
                                {{i.title}} 
                                <span class="label issue-label" style="background-color: #{{l.color}}" ng-repeat="l in i.tags | orderBy: 'color'">{{l.name}}</span>
                            </h4>
                        </div>
                        <div class="span2">
                            <button class="btn btn-mini pull-right"><i class="icon-plus"></i></button>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    </tbody>
</table>
-->

<div ng-repeat="i in issues | orderBy: 'number'"> <!-- | filter: filterIssuesWithTasks -->

<table class="task-table ">
    <tbody >
        <tr>
            <td colspan="3" class="task-bin">
                <h3 ng-show="true" class=""><button class="btn btn-mini" ng-click="showIssueTasks=!showIssueTasks;"><i ng-show="!showIssueTasks" class="icon-chevron-down"></i><i ng-show="showIssueTasks" class="icon-chevron-up"></i> </button>  <a href="{{i.html_url}}">#{{i.number}}</a> {{i.title}} <span class="label issue-label" style="background-color: #{{l.color}}" ng-repeat="l in i.tags | orderBy: 'color'">{{l.name}}</span> </h3>
            </td>
        </tr>
        <tr ng-show="showIssueTasks">
            <td droppable="changeTaskStatus(draggable, 'NEW');" class="well">
  
                <task ng-model="c" ng-repeat="c in i.task_details | orderBy: 'updated_at' | filter: '[TASK NEW'" draggable >
                </task>
                
                
                <form class="task task-form form-inline" ng-submit="addTask(i)" ng-controller="TaskCtrl">
                    <div class="row-fluid">
                        <div class="span9">
                            <input class="input-block-level" type="text" ng-model="description" size="30" placeholder="Task Description" />
                        </div>
                        <div class="span3">
                         
                            <button type=" submit" class="btn" ng-disabled="!description">Add</button>
                         
                        </div>
                    </div>
                </form>
       
            </td>
            <td droppable="changeTaskStatus(draggable, 'WORKING');" class="well">
                <task ng-model="c" ng-repeat="c in i.task_details | orderBy: 'updated_at' | filter: '[TASK WORKING'" draggable >
                </task>
            </td>
            <td droppable="changeTaskStatus(draggable, 'DONE');" class="well">
                <task ng-model="c" ng-repeat="c in i.task_details | orderBy: 'updated_at' | filter: '[TASK DONE'" draggable >
                </task>
            </td>
        </tr>
        <tr>
            <td>
           
            </td>
        </tr>
    </tbody>
</table>

</div>

</div>
  